# Output Format Specifications

This document defines the detailed formatting requirements for all 5 output types.

---

## PDF Generation Pipeline

All generators use the **HTML â†’ Playwright/Chromium â†’ PDF** pipeline:

1. Agent generates a complete HTML document with embedded CSS
2. Agent writes HTML to `/tmp/math-agent-studio-*.html`
3. `scripts/generate_pdf.py` converts HTML to PDF via headless Chromium
4. KaTeX is injected automatically for math rendering (from `assets/katex/`)

**CSS Reference**: `skills/process-textbook/assets/notes-base.css` defines the visual classes for the notes generator. Other generators may have their own CSS files.

---

## General Requirements

### File Specifications
- **Format**: PDF (generated by Chromium via Playwright)
- **Encoding**: UTF-8 (for text support)
- **Page Size**: US Letter (8.5" Ã— 11")
- **Orientation**: Portrait
- **Minimum File Size**: 100 KB (to detect generation errors)

### Typography
- **Body Font**: Times New Roman or similar serif (10-12pt)
- **Heading Font**: Arial or Helvetica (14-18pt bold)
- **Math Font**: KaTeX (auto-injected by generate_pdf.py)
- **Code Font**: Courier New or Monaco (10pt)

### Margins
- **Top/Bottom**: 0.75 inch (via Playwright PDF margins â€” reserves space for header/footer)
- **Left/Right**: 1 inch (via CSS `body { padding: 0 1in; }` â€” NOT via Playwright margins)

---

## 1. Notes Format

### Visual Design
```
PAGE 1 â€” TITLE PAGE (mandatory dedicated full page)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
              [BOOK TITLE]
           Chapter N [Topic]
              [Author Name]
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        Section X.X: [Title]
  Core Concepts â€¢ Mnemonics â€¢ Examples
          â€¢ Competition Problems

  Footer: "Â© [Year] [Author]"    "- 1 -"
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PAGES 2-9 â€” CONCEPTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ THE BIG IDEA ðŸ’¡                        â”‚  â† Pastel navy fill
â”‚ (Background: #E8EDF3, Border: #003366) â”‚     with accent border
â”‚ Core concept overview                   â”‚
â”‚ Why this matters                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Concept Title
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Definition: [Table with 2 columns]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Term     â”‚ Definition               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ...      â”‚ ...                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Visual Mnemonic: ðŸŽ¯
[Metaphor or analogy]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Common Trap âš ï¸                         â”‚  â† Pastel pink fill
â”‚ (Background: #FDE8E8, Border: #CC0000) â”‚     with accent border
â”‚ Students often confuse...               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Useful Tip ðŸ’¡                          â”‚  â† Pastel orange fill
â”‚ (Background: #FFF3E0, Border: #FF8800) â”‚     with accent border
â”‚ Quick way to remember...               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Try These:
1. [Easy example]
2. [Medium example]
3. [Application example]

PAGES 10-11 â€” PRACTICE PROBLEMS: EXAM LEVEL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Section A: Standard Exam Problems (6)
Section B: Competition-Style Problems ðŸ† (4-5)
```

### Content Structure
1. **Title Page** (MANDATORY dedicated full page â€” force page break after)
2. **Concepts** (2-4 major concepts, pages 2-9)
   - THE BIG IDEA box per major concept
   - Definition tables, mnemonics, properties
   - Common Trap / Useful Tip boxes
   - Try These problems (3-4 per concept)
3. **Practice Problems: Exam Level** (pages 10-11)
   - Section A: Standard Exam Problems (6 problems, progressive difficulty)
   - Section B: Competition-Style Problems (4-5 problems)

### Header & Footer
- **Header**: *italic* with em-dash separator â€” e.g. *"How To Prove It â€” Section 1.1"*
- **Footer left**: "Â© [Year] [Author Name]"
- **Footer center**: "- N -" (page number)
- Do NOT use pipe (|) separators in header
- Do NOT use "Generated by Math Agent Studio" in footer

### Whitespace Rules
- Minimum **18pt** vertical spacing between major sections
- Allow partially-empty pages â€” prioritize readability over density
- Page break if less than **120pt** remaining at bottom (avoid orphaned headers)
- Box border: thin **0.5pt** line in accent color (not thick borders)

### Color Palette â€” Pastel Tints with Accent Borders
- Navy box: Fill #E8EDF3, Border #003366 (0.5pt)
- Red box: Fill #FDE8E8, Border #CC0000 (0.5pt)
- Orange box: Fill #FFF3E0, Border #FF8800 (0.5pt)
- Green: #00AA00 (RGB: 0, 170, 0) â€” for success indicators
- Light Gray: #F5F5F5 (RGB: 245, 245, 245) â€” for table backgrounds
- Text inside boxes: accent color for title, black (#000000) for body text

---

## 2. Problems Format

### Visual Design
```
Section A: Standard Problems (í‘œì¤€ ë¬¸ì œ)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Problem 1. [Brief description if needed]

  [Problem statement with adequate whitespace]

  (a) [Multi-part question]
  (b) [Multi-part question]

  [Space for student work - 2-3 inches]

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Problem 2. ...
```

### Content Structure
- **Section A** (Problems 1-6): Standard exam questions
  - Progressive difficulty: Easy (1-2), Medium (3-4), Hard (5-6)
  - Mix of computational and conceptual
- **Section B** (Problems 7-10): Competition-style
  - Putnam-level difficulty
  - Requires creative thinking
  - May involve proofs

### Formatting Rules
- Clear problem numbers (bold, larger font)
- Adequate spacing between problems (at least 1 inch)
- Horizontal dividers between problems
- Space for student work (don't crowd)
- Diagrams/figures where needed

---

## 3. Quick Answers Format

### Visual Design
```
Quick Answer Key
[Chapter Title]
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Problem â”‚ Answer                      â”‚
â•žâ•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¡
â”‚ 1(a)    â”‚ x = 5                       â”‚
â”‚ 1(b)    â”‚ y = -2                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2       â”‚ True (see proof)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3       â”‚ n = 12                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ...     â”‚ ...                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Note: For detailed solutions, see [Explanations] document.
```

### Content Structure
- **Header**: Title and chapter name
- **Table**: 2-column format (Problem | Answer)
- **Footer**: Reference to explanations document

### Formatting Rules
- **Must fit on 1 page** (critical requirement)
- Alternating row colors (white/light gray)
- Bold problem numbers
- Concise answers (no explanations)
- Multi-part answers on separate rows (1a, 1b, etc.)
- For proofs: "See detailed solution" or "Proof required"

---

## 4. Explanations Format

### Visual Design
```
Detailed Solutions
[Chapter Title]
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Problem 1.
Answer: (a) x = 5, (b) y = -2

Solution:
(a) Given: [restate given information]

    Step 1: Apply [concept/theorem name]
            [Mathematical work]

    Step 2: Simplify
            [Show work]

    Step 3: Verify
            [Check answer]

    Therefore, x = 5. âœ“

(b) [Similar structure]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Common Mistake âš ï¸                       â”‚
â”‚ Students often forget to...             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Alternative Method:
[Different approach to same problem]
[Show that it yields same answer]

Key Insight:
This problem tests [concept]. The critical
step is recognizing [pattern/strategy].

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

### Content Structure
- Each problem gets its own section
- Answer stated upfront (bold)
- Step-by-step solution with justifications
- Common mistakes highlighted (red box)
- Alternative methods when applicable
- Key insights/takeaways

### Formatting Rules
- Clear problem headers (bold, larger font)
- Numbered steps for clarity
- Mathematical work properly aligned
- Boxes for warnings/tips
- Adequate spacing between problems
- Horizontal dividers

---

## 5. Script Format

### Visual Design
```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    Just Watch Math
    [Chapter Title]
    10-Minute Educational Video Script
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[00:00 - 00:30] Opening
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[Natural dialogue]

[í™”ë©´ ì§€ì‹œ: Show channel logo]

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

[00:30 - 02:30] THE BIG IDEA
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[Dialogue explaining core concept]

[í™”ë©´ ì§€ì‹œ: Display diagram of...]

[Stop for question: "ì—¬ëŸ¬ë¶„ ì´í•´ë˜ì‹œë‚˜ìš”?"]

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

### Content Structure
1. **Opening** (30 seconds)
   - Greeting
   - Topic introduction
   - Preview
2. **THE BIG IDEA** (2 minutes)
   - Core concept explanation
3. **Common Trap** (1 minute)
   - Warning about mistakes
4. **Quick Tip** (1 minute)
   - Helpful strategy
5. **Examples** (4 minutes)
   - 2-3 worked problems
6. **Review & Closing** (1.5 minutes)
   - Summary
   - Next steps
   - Call to action

### Formatting Rules
- **Timing markers** at every section [MM:SS]
- **Screen directions** in brackets [í™”ë©´ ì§€ì‹œ: ...]
- **Natural dialogue** (conversational, not formal)
- **Pauses for engagement** [Stop for question]
- **Visual cues** for transitions
- **Clear section dividers**

### Timing Budget
| Section | Time | Cumulative |
|---------|------|------------|
| Opening | 0:30 | 0:30 |
| Big Idea | 2:00 | 2:30 |
| Common Trap | 1:00 | 3:30 |
| Quick Tip | 1:00 | 4:30 |
| Examples | 4:00 | 8:30 |
| Review/Closing | 1:30 | 10:00 |

---

## Validation Checklist

### For All Outputs
- [ ] File is valid PDF format
- [ ] File size > 100 KB
- [ ] UTF-8 encoding for text
- [ ] All mathematical notation renders correctly
- [ ] Margins are consistent (1 inch all sides)
- [ ] Page numbers present (except Quick Answers)

### Output-Specific
**Notes:**
- [ ] 8-11 pages
- [ ] Page 1 is a dedicated title page (no content boxes)
- [ ] THE BIG IDEA box present (pastel navy fill)
- [ ] At least 2 colored boxes (trap/tip) with pastel fills
- [ ] Try These examples included per concept
- [ ] Pages 10-11: Practice Problems (Section A + Section B)
- [ ] Header uses italic em-dash format; footer has "Â© Author" + "- N -"

**Problems:**
- [ ] Exactly 10 problems
- [ ] Section A (1-6) and Section B (7-10) clearly marked
- [ ] Adequate space between problems

**Quick Answers:**
- [ ] Fits on 1 page
- [ ] All 10 answers present
- [ ] Table format used
- [ ] Multi-part answers on separate rows

**Explanations:**
- [ ] All 10 problems explained
- [ ] Step-by-step solutions
- [ ] At least 1 alternative method shown
- [ ] Common mistakes highlighted

**Script:**
- [ ] Timing markers throughout
- [ ] Total time â‰ˆ 10 minutes
- [ ] Natural, conversational tone
- [ ] Screen directions included

---

## Error Handling

### Common Issues

**Issue**: Text displays as garbage characters
**Solution**: Ensure UTF-8 encoding, use proper fonts

**Issue**: Mathematical symbols don't render
**Solution**: Use LaTeX rendering or Unicode math symbols

**Issue**: PDF file is too small (<100KB)
**Solution**: Content likely didn't generate properly, retry

**Issue**: Layout is cramped/cluttered
**Solution**: Increase spacing, use better page breaks

**Issue**: Colors don't show in boxes
**Solution**: Use RGB color values, check PDF viewer settings

---

## References

- Adobe PDF Specification 1.4: https://www.adobe.com/devnet/pdf/
- Typography Best Practices: [internal reference]
- LaTeX Math Symbols: https://www.ctan.org/
- WCAG Color Contrast Guidelines: https://www.w3.org/WAI/WCAG21/
